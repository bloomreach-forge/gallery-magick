<!DOCTYPE html>
    <!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2018-11-09 
 | Rendered using BloomReach Forge Maven Skin 3.0.1 based on Apache Maven Fluido Skin
-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                  <meta name="Date-Revision-yyyymmdd" content="20181109" />
              <meta http-equiv="Content-Language" content="en" />
      <title>Gallery Magick Image Processing Documentation &#x2013; Introduction</title>
  <link rel="stylesheet" href="./css/forge-maven-skin-syntaxhighlighter-3.0.1.min.css"/>
  <link rel="stylesheet" href="./css/forge-maven-skin-3.0.1.min.css"/>
  <link rel="stylesheet" href="./css/site.css" />
  <link rel="stylesheet" href="./css/print.css" media="print" />
  <link rel="icon" type="image/png" href="./images/skin/logo_64.png" sizes="64x64">

  
  <script type="text/javascript" src="./js/forge-maven-skin-syntaxhighlighter-3.0.1.min.js"></script>
  <script type="text/javascript" src="./js/forge-maven-skin-3.0.1.min.js"></script>

    </head>
<body class="topBarDisabled">
                        <a href="https://github.com/bloomreach-forge/gallery-magick">
    <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
         src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"
         alt="Fork me on GitHub">
  </a>
          <div class="container-fluid">
  <div id="banner">
    <div id="logo">
      <a href="http://www.github.com/bloomreach-forge">
        <img src="./images/skin/logo.png" alt="BloomReach Forge Logo" />
      </a>
    </div>
    <div class="pull-left">              <div id="bannerLeft">    <h1>Gallery Magick Image Processing</h1>
    </div>
              </div>
    <div class="pull-right"></div>
    <div class="clear"><hr/></div>
  </div>

  <div id="breadcrumbs">
    <div class="links">
      <a href="https://developers.bloomreach.com">developers.bloomreach.com</a>
      <a href="https://www.onehippo.org">onehippo.org</a>
    </div>
    <ul class="breadcrumb">
    
  <li id="publishDate">published: 2018-11-09  
  </li>
  
        
            </ul>
    <div class="clear"><hr/></div>
  </div>
<div class="row-fluid">
  <div id="leftColumn" class="span2">
    <div class="well sidebar-nav">
    
    <ul class="nav nav-list">
            <li class="nav-header">Home</li>
              <li class="active">  <a href="#"><span class="none"></span>Introduction</a>
  </li>
        <li>  <a href="prerequisites.html" title="Prerequisites">  <span class="none"></span>  Prerequisites</a>  </li>
                                        <li>  <a href="core/index.html" title="Gallery Image Processing Core">  <span class="icon-chevron-down"></span>  Gallery Image Processing Core</a>  
    <ul class="nav nav-list">
                  <li>  <a href="core/install.html" title="Installation">  <span class="none"></span>  Installation</a>  </li>
                        <li>  <a href="core/dev-howto.html" title="Developer's How-to">  <span class="none"></span>  Developer's How-to</a>  </li>
              </ul>
  </li>
                                        <li>  <a href="cms-plugins/index.html" title="Gallery Image Processing CMS Plugins">  <span class="icon-chevron-down"></span>  Gallery Image Processing CMS Plugins</a>  
    <ul class="nav nav-list">
                  <li>  <a href="cms-plugins/install.html" title="Installation">  <span class="none"></span>  Installation</a>  </li>
                        <li>  <a href="cms-plugins/configuration.html" title="Configuration">  <span class="none"></span>  Configuration</a>  </li>
              </ul>
  </li>
        <li>  <a href="faq.html" title="FAQ">  <span class="none"></span>  FAQ</a>  </li>
        <li>  <a href="apidocs/index.html" title="JavaDocs">  <span class="none"></span>  JavaDocs</a>  </li>
        <li>  <a href="release-notes.html" title="Release Notes">  <span class="none"></span>  Release Notes</a>  </li>
                  <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                    <li>  <a href="project-info.html" title="Project Information">  <span class="icon-chevron-down"></span>  Project Information</a>  
    <ul class="nav nav-list">
                  <li>  <a href="integration.html" title="Continuous Integration">  <span class="none"></span>  Continuous Integration</a>  </li>
                        <li>  <a href="dependency-convergence.html" title="Dependency Convergence">  <span class="none"></span>  Dependency Convergence</a>  </li>
                        <li>  <a href="dependency-info.html" title="Dependency Information">  <span class="none"></span>  Dependency Information</a>  </li>
                        <li>  <a href="dependency-management.html" title="Dependency Management">  <span class="none"></span>  Dependency Management</a>  </li>
                        <li>  <a href="distribution-management.html" title="Distribution Management">  <span class="none"></span>  Distribution Management</a>  </li>
                                  <li>  <a href="issue-tracking.html" title="Issue Tracking">  <span class="none"></span>  Issue Tracking</a>  </li>
                        <li>  <a href="license.html" title="Project License">  <span class="none"></span>  Project License</a>  </li>
                        <li>  <a href="modules.html" title="Project Modules">  <span class="none"></span>  Project Modules</a>  </li>
                        <li>  <a href="plugin-management.html" title="Plugin Management">  <span class="none"></span>  Plugin Management</a>  </li>
                        <li>  <a href="plugins.html" title="Project Plugins">  <span class="none"></span>  Project Plugins</a>  </li>
                        <li>  <a href="team-list.html" title="Project Team">  <span class="none"></span>  Project Team</a>  </li>
                        <li>  <a href="source-repository.html" title="Source Repository">  <span class="none"></span>  Source Repository</a>  </li>
                        <li>  <a href="project-summary.html" title="Project Summary">  <span class="none"></span>  Project Summary</a>  </li>
              </ul>
  </li>
                                                                                    <li>  <a href="project-reports.html" title="Project Reports">  <span class="icon-chevron-right"></span>  Project Reports</a>  </li>
        </ul>
    
          <hr />
      <div id="poweredBy">
                <div class="clear"></div>
                <div class="clear"></div>
                <div class="clear"></div>
                <div class="clear"></div>
              <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">  <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />  </a>
          </div>
    </div>
  </div>
  <div id="bodyColumn"  class="span10" >
    
  
    <div class="section">
<h2><a name="Introduction"></a>Introduction</h2>
      
<div class="section">
<h3><a name="What_is_Gallery_Magick_Image_Processing"></a>What is Gallery Magick Image Processing?</h3>
        
<p>
          Gallery Magick Image Processing provides an image file processing library
          and CMS plugins to manipulate image files, using any of these:
        </p>
        
<ul>
          
<li><a class="externalLink" href="https://github.com/rkalla/imgscalr">imgscalr - Java Image-Scaling Library</a></li>
          
<li><a class="externalLink" href="http://www.graphicsmagick.org/">GraphicsMagick</a></li>
          
<li><a class="externalLink" href="http://www.imagemagick.org/">ImageMagick</a></li>
        </ul>
        
<p>
          <tt>org.onehippo.forge.gallerymagick.core.command.ScalrProcessorUtils</tt> utility class
          provides a pure Java based image identifying/resizing solution.
        </p>
        
<p>
          When using a non-Java based solution, it executes commands of either
          <a class="externalLink" href="http://www.graphicsmagick.org/">GraphicsMagick</a>
          or <a class="externalLink" href="http://www.imagemagick.org/">ImageMagick</a>):
        </p>
        <img src="images/gallery-magick.png" alt="Gallery Magick Image Processing" />
        
<p>
          Gallery Magick Image Processing basically aims to provide the following:
        </p>
        
<ul>
          
<li>
            <a href="core/index.html"><b>Gallery Magick Image Processing Core Library</b> </a> :
            Programmatic Utilities to process image files using
            <a class="externalLink" href="https://github.com/rkalla/imgscalr">imgscalr - Java Image-Scaling Library</a>,
            <a class="externalLink" href="http://www.graphicsmagick.org/">GraphicsMagick</a>, or
            <a class="externalLink" href="http://www.imagemagick.org/">ImageMagick</a>.
          </li>
          
<li>
            <a href="cms-plugins/index.html"><b>Gallery Magick Image Processing CMS Plugins</b></a> :
            Hippo CMS Plugins such as Magick Command Gallery Processor using
            <b>Gallery Image Processing Core Library</b>.
          </li>
        </ul>
      </div>

      
<div class="section">
<h3><a name="Image_Metadata_Property"></a>Image Metadata Property</h3>
        
<p>
          When images are uploaded through <a href="cms-plugins/index.html"><b>Gallery Magick Image Processing CMS Plugins</b></a>,
          the plugin will extract all the image metadata automatically (through <tt>identify -verbose</tt> command internally)
          and store the result metadata string in <tt>gallerymagick.metadata (string)</tt> property at the
          <tt>hippogallery:imageset</tt> node (the parent node of all the image variant nodes such as
          <tt>hippogallery:original</tt> or <tt>hippogallery:thumbnail</tt>).
        </p>
        
<p>
          So, you can easily read the <tt>gallerymagick.metadata</tt> property to read the metadata such as camera maker,
          geo-location where the photo was taken, etc. Here's an example of image metadata extracted by <a class="externalLink" href="http://www.graphicsmagick.org/">GraphicsMagick</a>:
        </p>
        
<div class="brush: plain">
        
<div class="source"><pre>
Image: IMG_4181_2.JPG
  Format: JPEG (Joint Photographic Experts Group JFIF format)
  Geometry: 1600x1200
  Class: DirectClass
  Type: true color
  Depth: 8 bits-per-pixel component

  # SNIP

  Profile-EXIF: 1912 bytes
    Make: Apple
    Model: iPhone 6
    Orientation: 1
    X Resolution: 72/1
    Y Resolution: 72/1
    Resolution Unit: 2
    Software: 10.2
    Date Time: 2018:04:03 15:29:38

    # SNIP

    GPS Info: 1596
    GPS Latitude Ref: N
    GPS Latitude: 42/1,21/1,1463/100
    GPS Longitude Ref: W
    GPS Longitude: 71/1,3/1,3160/100
    GPS Altitude Ref: .
    GPS Altitude: 12786/359
    GPS Time Stamp: 19/1,29/1,33/1
    GPS Speed Ref: K
    GPS Speed: 0/1
    GPS Img Direction Ref: T
    GPS Img Direction: 15709/56
    GPS Dest Bearing Ref: T
    GPS Dest Bearing: 15709/56
    GPS Date Stamp: 2018:04:03
  Profile-XMP: 2549 bytes
  Tainted: False
  User Time: 0.030u
  Elapsed Time: 0m:0.035343s
  Pixels Per Second: 51.8Mi
        </pre></div>
        </div>
      </div>

      
<div class="section">
<h3><a name="Code_base_on_GitHub"></a>Code base on GitHub</h3>
        
<p>The code of this project is on GitHub at <a class="externalLink" href="https://github.com/bloomreach-forge/gallery-magick/">https://github.com/bloomreach-forge/gallery-magick/</a>.</p>
      </div>

    </div>

    
<div class="section">
<h2><a name="Demo_Application"></a>Demo Application</h2>

      
<div class="section">
<h3><a name="Demo_Application_with_Hippo_CMS_10"></a>Demo Application with Hippo CMS 10</h3>
        
<p>There is a demo submodule in which you can build and run a demo application, which configures <b>Magick Command Gallery Processor Plugin</b>.</p>
        
<p>Here are example commands to check out, build and run demo application:</p>
        
<div class="brush: bash">
        
<div class="source"><pre>
$ cd demo
$ mvn clean verify
$ mvn -P cargo.run
        </pre></div>
        </div>
        
<p>
          Visit http://localhost:8080/cms/, move to the &quot;Content&quot; perspective and select &quot;Images&quot;.
        </p>
        
<p>
          And select a folder and try to upload an image.
        </p>
        <img src="images/upload-image1.png" alt="Uploading Image" />
        
<p>
          If you click on the &quot;Upload&quot; button, you will see the image being uploaded.
        </p>
        <img src="images/upload-image2.png" alt="Uploaded Image" />
        
<p>
          You don't see anything new yet. :-)
          It's basically working like how the default Gallery Processor works, so the functionally is almost the same.
        </p>
        
<p>
          However, if you take a look at the logs
          (the demo project is configured to leave logs in DEBUG level for the plugin related code by default),
          you will see <i>clues</i> about how the plugin works under the hood!
        </p>
        
<p>
          <i>Note:</i> the log data shown above were minified for readability.
        </p>
        
<p>
          Basically, when either of the non-Java based solution,
          the plugin copies the original image data to a temporary file and resizes the temporary file of the original image
          for a thumbnail image by executing commands of either <a class="externalLink" href="http://www.graphicsmagick.org/">GraphicsMagick</a>
          or <a class="externalLink" href="http://www.imagemagick.org/">ImageMagick</a>.
          After executing the commands, it deletes all the temporary files.
        </p>
        
<p>
          Also, try to crop and restore thumbnails in the CMS UI to get more clues.
        </p>

      </div>

    </div>

    
<div class="section">
<h2><a name="Project_status"></a>Project status</h2>
      
<p>
        Please see <a href="release-notes.html">Release Notes</a>.
      </p>
    </div>
  

    </div>
    </div>
    </div>
    <hr/>
    <footer>
    <div class="container-fluid">
      <div class="row-fluid">
          <p class="copyright">Copyright &copy;      2018.
  BloomReach Inc. All rights reserved.
</p>
    </div>
            </div>
  </footer>
    </body>
</html>

